{"version":3,"file":"script.min.js","sources":["script.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  document.querySelectorAll('.custom-select').forEach(select => {\r\n    const selectedOptions = select.querySelector('.selected-options');\r\n    const searchInput = select.querySelector('.search-input');\r\n\r\n    // Vazba containeru k customSelect\r\n    const container = select.querySelector('.input-select__options-container');\r\n    container.customSelect = select;\r\n\r\n    // Nastavení akcí pro kliknutí na vybranou oblast a pro vyhledávání\r\n    selectedOptions.addEventListener('click', () => toggleOptions(select));\r\n    searchInput.addEventListener('keyup', () => filterOptions(select));\r\n\r\n    // Přednačtení vybraných hodnot a aktualizace placeholderu\r\n    preloadSelectedOptions(select);\r\n    updatePlaceholder(select);\r\n\r\n    // Nastavení akce pro každý .option-item v selectu\r\n    select.querySelectorAll('.option-item').forEach(option => {\r\n      option.addEventListener('click', () => selectOption(option, select));\r\n    });\r\n\r\n    // Vlastní JS trigger event pro vybrání hodnoty\r\n    select.closest(\".input-select\").addEventListener(\"ds-select-by-value\", function (event) {\r\n      const select_by_value = event.detail.value;\r\n\r\n      select.querySelectorAll('.option-item').forEach(option => {\r\n        if (option.querySelector(\".hidden-checkbox\").value === select_by_value) {\r\n          selectOption(option, select);\r\n        }\r\n      });\r\n  \r\n    });\r\n\r\n  });\r\n\r\n  // Zavírá všechny otevřené selecty při kliknutí mimo\r\n  document.addEventListener('click', (event) => {\r\n    document.querySelectorAll('.input-select__options-container').forEach(container => {\r\n      if (!container.customSelect.contains(event.target) && !container.contains(event.target)) {\r\n        toggleOptions(container.customSelect, true);\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\nfunction toggleOptions(customSelect, forceClose = false) {\r\n  const containers = document.querySelectorAll('.input-select__options-container');\r\n\r\n  //find customSelect in container.customSelect\r\n  const container = Array.from(containers).find(element => element.customSelect === customSelect);\r\n  if (!container) {\r\n    return;\r\n  }\r\n\r\n  if (container.classList.contains('hidden') && !forceClose) {\r\n    document.body.appendChild(container);\r\n\r\n    const rect = customSelect.getBoundingClientRect();\r\n    \r\n    container.style.left = `${rect.left + window.scrollX}px`;\r\n    container.style.top = `${rect.bottom + window.scrollY}px`;\r\n\r\n    container.classList.remove('hidden');\r\n  } else {\r\n    customSelect.appendChild(container);\r\n    container.classList.add('hidden');\r\n  }\r\n}\r\n\r\nfunction selectOption(option, customSelect) {\r\n  const containers = document.querySelectorAll('.input-select__options-container');\r\n\r\n  //find customSelect in container.customSelect\r\n  const container = Array.from(containers).find(element => element.customSelect === customSelect);\r\n  if (!container) {\r\n    return;\r\n  }\r\n\r\n  const selectedOptions = customSelect.querySelector('.selected-options');\r\n  const multiSelect = customSelect.getAttribute('data-multi') === 'true';\r\n  const searchSelect = customSelect.getAttribute('data-search') === 'true';\r\n  const optionText = option.innerText;\r\n  const checkbox = option.querySelector('.hidden-checkbox'); // Přístup k checkboxu nebo radio uvnitř .option-item\r\n\r\n  if (multiSelect) {\r\n    checkbox.checked = !checkbox.checked;\r\n\r\n    if (checkbox.checked) {\r\n      selectedOptions.innerText += ` ${optionText}`;\r\n      option.classList.add('selected');\r\n    } else {\r\n      selectedOptions.innerText = selectedOptions.innerText.replace(optionText, '').trim();\r\n      option.classList.remove('selected');\r\n    }\r\n  } else {\r\n    container.querySelectorAll('.hidden-checkbox').forEach(cb => cb.checked = false);\r\n    checkbox.checked = true;\r\n    selectedOptions.innerText = optionText;\r\n    container.querySelectorAll('.option-item').forEach(item => item.classList.remove('selected'));\r\n    option.classList.add('selected');\r\n\r\n    // Trigger the custom event \"ds-value-change\"\r\n    const event = new CustomEvent(\"ds-value-change\", {\r\n      detail: {\r\n        name: checkbox.name,\r\n        value: checkbox.value,\r\n        data: checkbox.dataset,\r\n      }\r\n    });\r\n    customSelect.closest(\".input-select\").dispatchEvent(event);\r\n\r\n    // Zavře single-select po výběru\r\n    toggleOptions(customSelect);\r\n  }\r\n\r\n  updatePlaceholder(customSelect);\r\n}\r\n\r\nfunction preloadSelectedOptions(customSelect) {\r\n  const selectedOptions = customSelect.querySelector('.selected-options');\r\n  const preloadCheckboxes = customSelect.querySelectorAll('.hidden-checkbox:checked');\r\n\r\n  preloadCheckboxes.forEach(checkbox => {\r\n    const option = checkbox.closest('.option-item');\r\n    const optionText = option.innerText;\r\n    selectedOptions.innerText += ` ${optionText}`;\r\n    option.classList.add('selected');\r\n  });\r\n\r\n  updatePlaceholder(customSelect);\r\n}\r\n\r\nfunction updatePlaceholder(customSelect) {\r\n  const selectedOptions = customSelect.querySelector('.selected-options');\r\n  const placeholderText = customSelect.getAttribute('data-placeholder') || 'Vyberte...';\r\n\r\n  if (selectedOptions.innerText.trim() === '' || selectedOptions.innerText.trim() === placeholderText) {\r\n    selectedOptions.innerText = placeholderText;\r\n  } else {\r\n    if (selectedOptions.innerText.includes(placeholderText)) {\r\n      selectedOptions.innerText = selectedOptions.innerText.replace(placeholderText, '').trim();\r\n    }\r\n  }\r\n}\r\n\r\nfunction removeDiacritics(text) {\r\n  return text.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\r\n}\r\n\r\nfunction filterOptions(customSelect) {\r\n  const containers = document.querySelectorAll('.input-select__options-container');\r\n\r\n  //find customSelect in container.customSelect\r\n  const container = Array.from(containers).find(element => element.customSelect === customSelect);\r\n  if (!container) {\r\n    return;\r\n  }\r\n\r\n  const input = removeDiacritics(container.querySelector('.search-input').value.toLowerCase());\r\n  const options = container.querySelectorAll('.option-item');\r\n\r\n  options.forEach(option => {\r\n    const text = removeDiacritics(option.innerText.toLowerCase());\r\n    option.style.display = text.includes(input) ? '' : 'none';\r\n  });\r\n}\r\n"],"names":["toggleOptions","customSelect","forceClose","containers","document","querySelectorAll","container","Array","from","find","element","classList","contains","body","appendChild","rect","getBoundingClientRect","style","left","window","scrollX","top","bottom","scrollY","remove","add","selectOption","option","selectedOptions","optionText","checkbox","event","querySelector","multiSelect","getAttribute","innerText","checked","replace","trim","forEach","cb","item","CustomEvent","detail","name","value","data","dataset","closest","dispatchEvent","updatePlaceholder","preloadSelectedOptions","placeholderText","includes","removeDiacritics","text","normalize","filterOptions","input","toLowerCase","display","addEventListener","select","searchInput","select_by_value","target"],"mappings":"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"}