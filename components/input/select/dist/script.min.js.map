{"version":3,"file":"script.min.js","sources":["script.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  document.querySelectorAll('.custom-select').forEach(select => {\n    const selectedOptions = select.querySelector('.selected-options');\n    const searchInput = select.querySelector('.search-input');\n\n    // Vazba containeru k customSelect\n    const container = select.querySelector('.input-select__options-container');\n    container.customSelect = select;\n\n    // Nastavení akcí pro kliknutí na vybranou oblast a pro vyhledávání\n    selectedOptions.addEventListener('click', () => toggleOptions(select));\n    searchInput.addEventListener('keyup', () => filterOptions(select));\n\n    // Přednačtení vybraných hodnot a aktualizace placeholderu\n    preloadSelectedOptions(select);\n    updatePlaceholder(select);\n\n    // Nastavení akce pro každý .option-item v selectu\n    select.querySelectorAll('.option-item').forEach(option => {\n      option.addEventListener('click', () => selectOption(option, select));\n    });\n\n    // Vlastní JS trigger event pro vybrání hodnoty\n    select.closest(\".input-select\").addEventListener(\"ds-select-by-value\", function (event) {\n      const select_by_value = event.detail.value;\n\n      select.querySelectorAll('.option-item').forEach(option => {\n        if (option.querySelector(\".hidden-checkbox\").value === select_by_value) {\n          selectOption(option, select);\n        }\n      });\n  \n    });\n\n  });\n\n  // Zavírá všechny otevřené selecty při kliknutí mimo\n  document.addEventListener('click', (event) => {\n    document.querySelectorAll('.input-select__options-container').forEach(container => {\n      if (!container.customSelect.contains(event.target) && !container.contains(event.target)) {\n        toggleOptions(container.customSelect, true);\n      }\n    });\n  });\n});\n\nfunction toggleOptions(customSelect, forceClose = false) {\n  const containers = document.querySelectorAll('.input-select__options-container');\n\n  //find customSelect in container.customSelect\n  const container = Array.from(containers).find(element => element.customSelect === customSelect);\n  if (!container) {\n    return;\n  }\n\n  if (container.classList.contains('hidden') && !forceClose) {\n    document.body.appendChild(container);\n\n    const rect = customSelect.getBoundingClientRect();\n    \n    container.style.left = `${rect.left + window.scrollX}px`;\n    container.style.top = `${rect.bottom + window.scrollY}px`;\n\n    container.classList.remove('hidden');\n  } else {\n    customSelect.appendChild(container);\n    container.classList.add('hidden');\n  }\n}\n\nfunction selectOption(option, customSelect) {\n  const containers = document.querySelectorAll('.input-select__options-container');\n\n  //find customSelect in container.customSelect\n  const container = Array.from(containers).find(element => element.customSelect === customSelect);\n  if (!container) {\n    return;\n  }\n\n  const selectedOptions = customSelect.querySelector('.selected-options');\n  const multiSelect = customSelect.getAttribute('data-multi') === 'true';\n  const searchSelect = customSelect.getAttribute('data-search') === 'true';\n  const optionText = option.innerText;\n  const checkbox = option.querySelector('.hidden-checkbox'); // Přístup k checkboxu nebo radio uvnitř .option-item\n\n  if (multiSelect) {\n    checkbox.checked = !checkbox.checked;\n\n    if (checkbox.checked) {\n      selectedOptions.innerText += ` ${optionText}`;\n      option.classList.add('selected');\n    } else {\n      selectedOptions.innerText = selectedOptions.innerText.replace(optionText, '').trim();\n      option.classList.remove('selected');\n    }\n  } else {\n    container.querySelectorAll('.hidden-checkbox').forEach(cb => cb.checked = false);\n    checkbox.checked = true;\n    selectedOptions.innerText = optionText;\n    container.querySelectorAll('.option-item').forEach(item => item.classList.remove('selected'));\n    option.classList.add('selected');\n\n    // Trigger the custom event \"ds-value-change\"\n    const event = new CustomEvent(\"ds-value-change\", {\n      detail: {\n        name: checkbox.name,\n        value: checkbox.value,\n        data: checkbox.dataset,\n      }\n    });\n    customSelect.closest(\".input-select\").dispatchEvent(event);\n\n    // Zavře single-select po výběru\n    toggleOptions(customSelect);\n  }\n\n  updatePlaceholder(customSelect);\n}\n\nfunction preloadSelectedOptions(customSelect) {\n  const selectedOptions = customSelect.querySelector('.selected-options');\n  const preloadCheckboxes = customSelect.querySelectorAll('.hidden-checkbox:checked');\n\n  preloadCheckboxes.forEach(checkbox => {\n    const option = checkbox.closest('.option-item');\n    const optionText = option.innerText;\n    selectedOptions.innerText += ` ${optionText}`;\n    option.classList.add('selected');\n  });\n\n  updatePlaceholder(customSelect);\n}\n\nfunction updatePlaceholder(customSelect) {\n  const selectedOptions = customSelect.querySelector('.selected-options');\n  const placeholderText = customSelect.getAttribute('data-placeholder') || 'Vyberte...';\n\n  if (selectedOptions.innerText.trim() === '' || selectedOptions.innerText.trim() === placeholderText) {\n    selectedOptions.innerText = placeholderText;\n  } else {\n    if (selectedOptions.innerText.includes(placeholderText)) {\n      selectedOptions.innerText = selectedOptions.innerText.replace(placeholderText, '').trim();\n    }\n  }\n}\n\nfunction removeDiacritics(text) {\n  return text.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n}\n\nfunction filterOptions(customSelect) {\n  const containers = document.querySelectorAll('.input-select__options-container');\n\n  //find customSelect in container.customSelect\n  const container = Array.from(containers).find(element => element.customSelect === customSelect);\n  if (!container) {\n    return;\n  }\n\n  const input = removeDiacritics(container.querySelector('.search-input').value.toLowerCase());\n  const options = container.querySelectorAll('.option-item');\n\n  options.forEach(option => {\n    const text = removeDiacritics(option.innerText.toLowerCase());\n    option.style.display = text.includes(input) ? '' : 'none';\n  });\n}\n"],"names":["toggleOptions","customSelect","forceClose","containers","document","querySelectorAll","container","Array","from","find","element","classList","contains","body","appendChild","rect","getBoundingClientRect","style","left","window","scrollX","top","bottom","scrollY","remove","add","selectOption","option","selectedOptions","optionText","checkbox","event","querySelector","multiSelect","getAttribute","innerText","checked","replace","trim","forEach","cb","item","CustomEvent","detail","name","value","data","dataset","closest","dispatchEvent","updatePlaceholder","preloadSelectedOptions","placeholderText","includes","removeDiacritics","text","normalize","filterOptions","input","toLowerCase","display","addEventListener","select","searchInput","select_by_value","target"],"mappings":"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"}